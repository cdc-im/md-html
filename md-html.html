<!DOCTYPE html>
<html>
	<head>
		<meta content="IE=8" http-equiv = "X-UA-Compatible" />
		<meta http-equiv = "Content-Type" content = "text/html;charset = UTF-8">	
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">	
		<style>
			.preview{
				padding-top: 100px;
				margin:0 auto;
				width:95%;
			}
			.input-xlarge{
				width:100%;
			}
			.preview div{
				float:left;
				width:48%;
			}
			.preview div.html-div{
				margin-left: 12px
			}
			.preview button{
				margin:0 auto;
				width:200px;
				display: block
			}
		</style>
	</head>
<body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="brand">markdown-html</a>
			</div>
		</div>
	</div>
	<div class="preview">
		<div class = "markdown-div">
			<h2 class="text-center page-header">markdown</h2>
			<textarea id="md-textarea" class="input-xlarge" rows="40"></textarea>
			<button class="btn btn-primary" id="turnToHtml">markdown转html</button>
		</div>
		<div class = "html-div">
			<h2 class="text-center page-header">html</h2>
			<textarea id="html-textarea" class="input-xlarge" rows="40"></textarea>
			<button class="btn btn-primary" id="turnToMd">html转markdown</button>
		</div>
	</div>
	<script src="js/markdown.js"></script>
	<script src="js/to-markdown.js"></script>
	<script>
		var $ = function (id) { return document.getElementById(id); };

		function Editor_m2h(input, preview) {
			this.update = function () {
				preview.value = markdown.toHTML(input.value);
			};
			input.editor = this;
			this.update();
		}

		$('turnToHtml').onmousedown = function(){
			var newInstance = new Editor_m2h($('md-textarea'),$('html-textarea'));
			newInstance.update();
		}
		$('turnToMd').onmousedown = function(){
			var newInstance = new Editor_h2m($('html-textarea'),$('md-textarea'));
			newInstance.update();
		}

		function Editor_h2m(input, preview) {
			this.update = function () {
				preview.value = toMarkdown(input.value);
			};
			input.editor = this;
			this.update();
		}

		//console.log(toMarkdown("<h2>这是首页</h2>"))
	</script>
  </body>
</html>